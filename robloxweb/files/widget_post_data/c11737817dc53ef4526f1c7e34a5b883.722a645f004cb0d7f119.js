(self.webpackChunkvk=self.webpackChunkvk||[]).push([[27669],{611859:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{WkView:()=>WkView});var core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(530522),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(66108),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(296253),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(991181),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(579665),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(95767),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(175115),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(59357),core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(976142),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(751876),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(283946),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(21466),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(668040),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(726271),_web_lib_video__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(325489),_web_lib_market__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(787910),_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(786067),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(479957),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(100416),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(850167),_web_lib_date__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(289988),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(803834),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(486125),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(695724),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(49535),_shared_lib_site__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(961540),_web_lib_ajax_cache__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(115471),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(787481),_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(315544),_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(386409),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(654612),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(376852),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(376270),_shared_lib_common__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(40906),_web_lib_fx__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(635676),_web_reports_reports__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(186699),_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(175382),_web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(99392);function _slicedToArray(_,e){return _arrayWithHoles(_)||_iterableToArrayLimit(_,e)||_unsupportedIterableToArray(_,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(_,e){if(_){if("string"==typeof _)return _arrayLikeToArray(_,e);var o=Object.prototype.toString.call(_).slice(8,-1);return"Object"===o&&_.constructor&&(o=_.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(_,e):void 0}}function _arrayLikeToArray(_,e){(null==e||e>_.length)&&(e=_.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=_[o];return i}function _iterableToArrayLimit(_,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(_)){var o=[],i=!0,t=!1,r=void 0;try{for(var l,w=_[Symbol.iterator]();!(i=(l=w.next()).done)&&(o.push(l.value),!e||o.length!==e);i=!0);}catch(_){t=!0,r=_}finally{try{i||null==w.return||w.return()}finally{if(t)throw r}}return o}}function _arrayWithHoles(_){if(Array.isArray(_))return _}function _extends(){return _extends=Object.assign||function(_){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(_[i]=o[i])}return _},_extends.apply(this,arguments)}var WkView={init:function(){window.wkLayer||(window.wkLayer=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ce)("div",{id:"wk_layer"}),window.wkLayerWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ce)("div",{id:"wk_layer_wrap",className:"scroll_fix_wrap fixed layer_wrap js-mediator-container"}),wkLayerWrap.appendChild(window.wkLayer),bodyNode.appendChild(wkLayerWrap),window.wkLayer.style.width=lastWindowWidth-(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.sbWidth)()-2+"px")},showLayer:function(){layerQueue.hide(),layers.wrapshow(wkLayerWrap,.8),layers.fullhide=WkView.hide,WkView.onScroll(),wkcur.showT=setTimeout((function(){layers.wrapshow(wkLayerWrap,.8),layers.fullhide=WkView.hide}),0),onBodyResize()},restoreLayer:function(_){WkView.showLayer(),wkcur.root?_.myLoc&&nav.setLoc(_.myLoc):WkView.setLocation(),_.prevLoc&&(wkcur.prevLoc=_.prevLoc),WkView.updateSize()},wikiClick:function(_,e,o){if((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.checkEvent)(e))return!0;o=o||{};for(var i=e.target;i&&"A"!==i.tagName;)i=i.parentNode;if(i&&"A"===i.tagName){var t,r,l=i.href,w=l.match(/^\/(page[^?]*)(\?.*)?$/);if(w)t=w[1],r=w[4]?AjaxConvert.fromQueryString(w[4].substr(1)):{};else{var a=String.raw`https?:\/\/([a-zA-Z0-9\-_\.]+\.)?(?:${_shared_lib_site__WEBPACK_IMPORTED_MODULE_25__.VK_HOST_REGEX_GROUP_UNSAFE.source})\/([^?]*)(\?.*)?$`;if(!(w=l.match(new RegExp(a,"i")))||!w[3])return!0;t=w[3].split("/"),r=w[4]?AjaxConvert.fromQueryString(w[4].substr(1)):{}}var s={};switch(t[0]){case"pages":s.oid=r.oid||r.o,s.id=r.id,s.p=r.p;break;case"ru":case"en":s.p=t[1],s.global=t[0];break;default:t[0].match(/^page-?\d+_\d+$/)?(r=t[0].substr(4).split("_"),s.oid=r[0],s.id=r[1],s=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(o,s)):t[0].match(/^note\d+_\d+$/)&&(r=t[0].substr(4).split("_"),s.w=t[0])}if(s.w||s.oid&&(s.id||s.p))return(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.showWiki)(s),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(e)}},edit:function edit(){if(!wkcur.canEdit)return!0;var params;if("wall"===wkcur.type)return wkcur.edit?Wall.cancelEdit():Wall.editPost((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wpe_edit"+wkcur.post),wkcur.post,{from:"wkview"}),!0;var hash=wkcur.editHash||"";if(wkcur.edit)return params=wkcur.note?{w:"note"+wkcur.oid+"_"+wkcur.nid}:{oid:wkcur.oid,id:wkcur.pid,p:wkcur.p},window.wkcur=!1,(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.showWiki)(params,!1,!1,{noloader:!0}),!0;wkcur.edit=!0,params={act:"edit",oid:wkcur.oid,load:1,section:"edit",hash},wkcur.note?(params.nid=wkcur.nid,params.note=1):params.id=wkcur.pid,wkcur.from&&(params.from=wkcur.from),ajax.post("wkview.php",params,{stat:[window.jsc("web/pages.js"),window.jsc("web/wk_editor.js"),"wk_editor.css"],onDone:function onDone(content,js,info,options){wkcur.wkContent.innerHTML=content,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(wkcur.wkRight),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkcur.wkBox,"wk_view_no_background");try{eval(js)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.logEvalError)(_,js)}(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(window,"resize",WkView.onResize),WkView.onScroll(),WkView.updateSize()}})},onScroll:function(_,e){switch(wkcur.lSTL&&WkView.stlOnScroll(e),e||WkView.updateSize(!0),wkcur.type){case"wall":return WkView.wallUpdateRepliesOnScroll(e);case"likes":return WkView.likesOnScroll(e);case"history":return WkView.historyOnScroll(e);case"market":if(window.Market)return Market.updateCommentsOnScroll(e);break;case"story":window.Stories&&Stories.onResize()}if(!(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_33__.isFunction)(WkView.customOnScroll)||!WkView.customOnScroll(e)){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wke_buttons_panel"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wke_buttons_cont");if(o){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)(i,!0)[1];wkcur.bottomSize||(wkcur.bottomSize=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)(o));var r=wkcur.bottomSize[1],l=window.innerHeight||document.documentElement.clientHeight;if(e&&!wkcur.fixedBottom&&l-r<t+20)wkLayerWrap.scrollTop+=t+20-(l-r);else if(l-r<t){if(!wkcur.fixedBottom||e){wkcur.fixedBottom=!0;var w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)(i);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkcur.wkContent,"wke_bottom_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(o,{width:w[0],height:w[1]}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(i,{paddingTop:w[1]})}}else(wkcur.fixedBottom||e)&&(wkcur.fixedBottom=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)(wkcur.wkContent,"wke_bottom_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(o,{width:null,height:null}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(i,{paddingTop:0}));var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wke_controls"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wke_controls_cont");if(s)if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)(s,!0)[1]<0){if(!wkcur.fixedTop){wkcur.fixedTop=!0;var n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)(s);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkcur.wkContent,"wke_top_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(a,{width:n[0],height:n[1]}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(s,{paddingTop:n[1]})}}else wkcur.fixedTop&&(wkcur.fixedTop=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)(wkcur.wkContent,"wke_top_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(a,{width:null,height:null}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(s,{paddingTop:0}))}}},saveInfo:function saveInfo(autosave){var params={page:wkcur.p,hash:wkcur.hash,pageEditHash:wkcur.editHash};return params.Body=wkcur.editor.val(),!1!==params.Body&&(params=wkcur.note?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(params,{act:"save",oid:wkcur.oid,nid:wkcur.nid,wysiwyg:1,note:wkcur.note}):(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(params,{act:"save",oid:wkcur.oid,id:wkcur.pid}),wkcur.pageTitle&&(params.title=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)(wkcur.pageTitle)),"page_new"===wkcur.type&&(params.page_new=1),wkcur.from&&(params.from=wkcur.from),(!autosave||!(wkcur.lockAutoSave||wkcur.note&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)()))&&(wkcur.lockAutoSave=!0,void ajax.post(wkcur.note?"wkview.php":"al_pages.php",params,{onDone:function onDone(text,data){var saveEl;if(wkcur.lockAutoSave=!1,wkcur.editor.changed=!1,autosave||(saveEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("pages_save_info_wysiwyg"),saveEl&&(saveEl.innerHTML=text,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(saveEl))),"market"===wkcur.from&&data){null!==data.html&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("group_edit_market_wiki").innerHTML=data.html);try{eval(data.js)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.logEvalError)(_,data.js)}}else if(data){if(data.nid&&(wkcur.nid=data.nid),data.raw&&(wkcur.wkRaw=data.raw),data.created&&cur.chooseMedia)return nav.setLoc((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(nav.objLoc,{w:"note"+data.raw})),autosave||WkView.hide(!1,!0),cur.pbNoteAdded=data,cur.chooseMedia("note",data.raw,data),!0;var title=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("share_note_title"+data.raw);if(title&&!autosave&&(title.innerHTML=data.title),wkcur.note&&wkcur.toStatus&&!autosave)return WkView.hide(!1,!0),wkcur.reloadOnSave&&((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.boxRefreshCoords)(boxLoader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(boxLoader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(boxLayerWrap),nav.reload({onDone:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(boxLoader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(boxLayerWrap)}})),!0}if(autosave)return!0;setTimeout((function(){saveEl&&(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_34__.fadeOut)(saveEl,200)}),1500)},showProgress:function(){!autosave&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.lockButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_layer_save"))},hideProgress:function(){!autosave&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.unlockButton)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_layer_save"))},onFail:WkView.showError})))},initWkBox:function initWkBox(title,html,options,script){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)()&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)().type&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)().type==options.type&&((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)().setOptions({onHide:!1}),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_22__.curBox)().hide());var box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_30__.showFastBox)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)({title},options),html);if(options.wkRaw&&(box.wkRaw=options.wkRaw),options.type&&(box.type=options.type),options.commonClass&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(box.bodyNode,options.commonClass),script)try{eval(script)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.logEvalError)(_,script)}box.setOptions(_extends({onHide(_){!_&&nav.objLoc.w&&nav.change({w:!1},void 0,{asBox:!0})},onShow(){box.wkRaw&&(nav.objLoc.w=box.wkRaw,nav.setLoc(nav.objLoc))}},options.boxOptions));var nl=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(nav.objLoc,{w:options.wkRaw});return delete nl.z,nav.strLoc==nav.toStr(nl)||options.noChangeLocation||nav.setLoc(nl),box},evalScripts:function(_){if("SCRIPT"===_.tagName)_.parentNode.replaceChild(this.cloneNode(_),_);else for(var e=0,o=_.childNodes;e<o.length;)this.evalScripts(o[e++])},cloneNode:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ce)(_.tagName.toLowerCase());e.text=_.innerHTML;for(var o=_.attributes.length-1;o>=0;o--)e.setAttribute(_.attributes[o].name,_.attributes[o].value);return e},show:function show(title,html,options,script,ev){if(options.asBox)return this.initWkBox(title,html,options,script),!0;window.wkcur?(wkcur.shown&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(wkLayerWrap)&&WkView.hide(!0,!0),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(wkcur._hide||[],(function(_,e){(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_33__.isFunction)(e)&&e()}))):this.init();var hlen=window.wkcur&&wkcur.historyLen?wkcur.historyLen:0;window.wkcur&&(wkcur.doBack||options.fromlist)||(hlen+=1);var toQueue=options.queue;if(toQueue&&(layerQueue.push(),options.queue=!1),(window.wkcur||{}).shown&&wkcur.root&&nav.setLoc(wkcur.prevLoc),window.wkcur={historyLen:hlen,_hide:[],_show:[]},(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.iphone||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.ipad)&&(cur.wkStartScroll=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_21__.scrollGetY)()),options.edit&&(cur._editMode=function(){return!0},!window.WkEditor))return window.stManager.add([window.jsc("web/wk_editor.js"),"wk_editor.css"],WkView.show.pbind(title,html,options,script,ev)),!1;cur.cancelTooltip=!0,window.tooltips&&tooltips.hideAll(),options.skipBoxesHide||boxQueue.hideAll(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(wkLayerWrap)||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(window,"resize",WkView.onResize),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(wkLayerWrap,"click",WkView.onClick),WkView.showLayer()),wkcur.noLocChange=0,wkcur.noHistory=options.noLocChange,wkcur.isArchived=options.isArchived,wkcur.hideTitle=options.hide_title?1:0,wkcur.hideCloseButton=options.hideCloseButton?1:0,wkcur.shown=!0,options.editHash&&(wkcur.editHash=options.editHash),wkcur.edit&&(wkcur.edit=!1),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,options),wkcur.root?(cur.nav.push((function(_,e,o,i){if((o=nav.toStr(o))==wkcur.prevLoc)return WkView.hide(!0),!1})),!options.noLocChange&&options.myLoc&&nav.setLoc(options.myLoc)):(WkView.setLocation(options.noLocChange,toQueue),options.prevLoc&&(wkcur.prevLoc=options.prevLoc)),ev&&ev.pageX&&ev.pageY&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,{oldX:ev.pageX,oldY:ev.pageY,oldT:Date.now()}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkLayerWrap,"wk_dark"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(layerBG,"wk_dark");var content=html,hideLeft=wkcur.historyLen>1?"":"display: none;",hideCloseBtn=wkcur.hideCloseButton?"display: none;":"";if("wall"==options.type?((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(window,"resize",WkView.onResize),WkView.wallBeforeInitPost(options)):options.edit?(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(window,"resize",WkView.onResize):options&&(content='<div class="wk_text wk_wiki_content'+(options.className?" "+options.className:"")+'" onclick="return WkView.wikiClick(this, event);">'+content+"</div>"),wkcur.wkCont?wkcur.wkContent.innerHTML=content:(wkLayer.innerHTML=`<div class="wk_cont">\n  <div id="wk_box" onclick="wkcur.wkClicked = true;">\n    <div id="wk_loader"></div>\n    <a id="wk_close_link" href="javascript: return false;" class="fl_r wk_close_link" onclick="return WkView.hide(false, true, event);">\n      ${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("global_close")}\n    </a>\n    <div id="wk_summary" class="fl_l"><span class="summary" id="wk_layer_title">${title}</span></div>\n    <div id="wk_content" tabindex="0">${content}</div>\n    <div class="clear"></div>\n  </div>\n  <div id="wk_dots" class="wk_dots"></div>\n  </div>\n<div id="wk_left_wrap"><div id="wk_left" style="${hideLeft}" class="wk_left no_select"></div></div>\n<div class="wk_left_nav no_select" id="wk_left_nav" style="${hideLeft}" ' + 'onmousedown="wkcur.wkClicked = true; WkView.back();" onselectstart="return cancelEvent(event);"></div>\n<div class="wk_right_nav no_select" id="wk_right_nav" onmousedown="if (!wkcur.noClickHide) { wkcur.wkClicked = true; WkView.hide(); }"><div id="wk_right" class="wk_close no_select" style="${hideCloseBtn}"><div class="wk_close_inner"></div></div></div>\n<div id="wk_left_arrow_bg" class="wk_arrow_bg no_select" onclick="return WkView.navigate(this, event, -1);" onmouseover="WkView.preloadArrow(false)"><div class="wk_arrow_bg_inner"></div><div id="wk_left_arrow" class="wk_arrow no_select"></div></div>\n<div id="wk_right_arrow_bg" class="wk_arrow_bg no_select" onclick="return WkView.navigate(this, event, 1);" onmouseover="WkView.preloadArrow(true)"><div class="wk_arrow_bg_inner"></div><div id="wk_right_arrow" class="wk_arrow no_select"></div></div>`,options.nocross&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.geByClass1)("wk_close_inner",wkLayer)),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,{wkCont:wkLayer.firstChild,wkBox:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_box"),mvLoader:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_loader"),wkContent:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_content"),wkLeftNav:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_left_nav"),wkRightNav:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_right_nav"),wkLeft:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_left"),wkLeftWrap:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_left_wrap"),wkRight:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_right"),wkLeftArrow:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_left_arrow"),wkRightArrow:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_right_arrow"),wkLeftArrowBg:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_left_arrow_bg"),wkRightArrowBg:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_right_arrow_bg"),wkDots:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_dots")}),"away"===options.wkRaw.substr(0,4)&&(this.evalScripts(wkLayer),setTimeout((function(){window._mediator&&window._mediator.start({url:location.pathname+location.search})}),1500))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggle)("wk_summary",title),options.withDots&&options.wkRawList.length)for(var dotsCount=options.wkRawList.length,i=0;i<dotsCount;i++){var iRaw=options.wkRawList[i],dotEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.se)('<span class="wk_dots__dot" onclick="WkView.openRaw(event, \''+iRaw+"')\"></span>");options.wkRaw==iRaw&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(dotEl,"wk_dots__dot_active"),wkcur.wkDots.appendChild(dotEl)}if(wkcur.commonClass?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkcur.wkBox,wkcur.commonClass):wkcur.wkBox.className="",wkcur.noCloseIcon&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(wkcur.wkRight),wkcur.oid&&wkcur.pid&&(WkView.initSTL(),options.edit||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(window,"resize",WkView.onResize))),options.overflow?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkcur.wkBox,"wk_overflow_hidden"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)(wkcur.wkBox,"wk_overflow_hidden"),script)try{eval(script)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.logEvalError)(_,script)}WkView.updateSize(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.removeEvent)(document,"keydown",WkView.onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(document,"keydown",WkView.onKeyDown),options.onLoaded&&options.onLoaded(),(0,_web_lib_market__WEBPACK_IMPORTED_MODULE_15__.shortCurrency)(),WkView.updateArrows(),wkcur.wkContent.focus(),wkLayerWrap.scrollTop=0,"wall"===options.type?WkView.wallAfterInitPost():options.toScroll?(wkLayerWrap.scrollTop=options.toScroll,wkcur.toScroll=0):wkLayerWrap.scrollTop=0,options.fromlist&&WkView.preloadArrow(1==options.fromlist),(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.getAudioPlayer)().updateCurrentPlaying(),(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_32__.updateAriaElements)();var postLargeGif=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domByClass)(wkLayer,"page_gif_large");if(postLargeGif&&Page.showGif((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domFC)(postLargeGif)),ev&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domClosest)("bookmarks_row_type_product",ev.target)&&options&&options.wkRaw){var productRaw=options.wkRaw.match(/^product(-?\d+)_(\d+)/);(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_17__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"product",item_owner_id:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(productRaw[1]),item_id:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(productRaw[2]),time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_20__.getServerTime)()})}return!1},hide:function(_,e,o){if(window.wkcur&&(e||wkcur.shown)){var i=!wkcur.wkRaw.match(/^recom_apps\d+$/)&&!wkcur.wkRaw.match(/^app\d+$/);if("story"===wkcur.type&&!e&&window.Stories&&!_)return Stories.hideLayer();if(clearTimeout(wkcur.autosaveTimeout),clearTimeout(wkcur.showT),!e&&wkcur.edit&&wkcur.editor&&wkcur.editor.changed){if(wkcur.note&&wkcur.toStatus&&!_)return void WkView.saveInfo();var t=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_30__.showFastBox)(wkcur.lang.pages_close_title,wkcur.lang.pages_close_text,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("box_yes"),(function(){t.hide(),WkView.hide(_,!0)}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("box_no"))}else{if(e||!wkcur.warningBeforeHiding){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(wkcur._hide||[],(function(_,e){(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_33__.isFunction)(e)&&e()}));var r=!1;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(wkLayerWrap)&&(setTimeout(layerQueue.pop,0),(r=layerQueue.count()&&"wiki"==layerQueue._layers[layerQueue._layers.length-1][0]&&!layerQueue._bl)||(layers.wraphide(wkLayerWrap),layers.fullhide=!1),wkcur.photoViewverHideCB&&layerQueue.count()&&"photo"===layerQueue._layers[layerQueue._layers.length-1][0]&&cur.pvOptions&&(cur.pvOptions.onHide=wkcur.photoViewverHideCB,wkcur.photoViewverHideCB=!1)),window.tooltips&&tooltips.destroy(this),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.removeEvent)(document,"keydown",WkView.onKeyDown),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)(wkcur.wkContent,"wke_top_fixed"),wkcur.fixedTop=wkcur.fixedBottom=!1,r||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)(wkLayerWrap,"wk_dark"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)(layerBG,"wk_dark"),wkcur.shown=!1,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.removeEvent)(wkLayerWrap,"click",WkView.onClick),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.removeEvent)(wkLayerWrap,"scroll",WkView.onScroll),wkcur.wkContent.innerHTML=""),wkcur.wkClicked=!1,wkcur.hideTitle=!1,wkcur.changeCanvasSize=!1,wkcur.onHide&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_33__.isFunction)(wkcur.onHide)&&wkcur.onHide(),cur._editMode=!1,wkcur.root&&!0!==_?WkView.backLocation():wkcur.noLocChange||!0===_?i&&__adsUpdate():(2===_?nav.setLoc(hab.getLoc()):WkView.backLocation(),i&&__adsUpdate("lazy")),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.iphone||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.ipad){var l=(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_21__.scrollGetY)();Math.abs(l-cur.wkStartScroll)>500&&(0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_21__.scrollToY)(cur.wkStartScroll,0)}return delete wkcur.historyLen,(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.getAudioPlayer)().updateCurrentPlaying(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),window._mediator&&window._mediator.isActive()&&window._mediator.stop(),!1}var w=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_30__.showFastBox)(wkcur.warningBeforeHiding.confirm_box_title,wkcur.warningBeforeHiding.confirm_box_content,wkcur.warningBeforeHiding.confirm_box_ack,(function(){w.hide(),WkView.hide(_,!0)}),wkcur.warningBeforeHiding.confirm_box_cancel)}}},cmp:function(_,e){var o=_.length,i=e.length;return o<i?-1:o>i?1:_<e?-1:_>e?1:0},onClick:function(_){if(wkcur.wkClicked||wkcur.noClickHide||_&&cur.__mdEvent&&_.target!=cur.__mdEvent.target)wkcur.wkClicked=!1;else{var e=Math.abs(_.pageX-(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(wkcur.oldX)),o=Math.abs(_.pageY-(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(wkcur.oldY));(e>3||o>3)&&Date.now()-(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(wkcur.oldT)>300&&WkView.hide()}},onKeyDown:function(_){if(!1===(_=_||window.event).returnValue)return!1;if(!cur.pvShown&&_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.KEY.ESC)return WkView.hide(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(_);if(!(cur.pvShown||wkcur.edit||window.cur.storyLayer||_.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.KEY.LEFT&&_.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.KEY.RIGHT)){var e=_&&_.target||_.srcElement;return!(!e||!("TEXTAREA"===e.tagName||"INPUT"===e.tagName||"DIV"===e.tagName&&e.contentEditable&&"inherit"!=e.contentEditable))||(WkView.navigate(null,_,_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.KEY.RIGHT?1:-1),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(_))}if(WkView.canEdit){if(83===_.keyCode&&(_.ctrlKey||_.metaKey&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.mac))return WkView.saveInfo(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(_);if((10===_.keyCode||13===_.keyCode&&(_.ctrlKey||_.metaKey&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.mac))&&WkView.saveInfo(),cur.updTimeout)return;cur.updTimeout=setTimeout((function(){WkView.onResize(),cur.updTimeout=!1}),200)}},onResize:function(){var _=lastWindowWidth,e=lastWindowHeight,o=_-(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.sbWidth)()-2-120-34-50,i=e-31-28-72;o>1280?o=1280:o>807&&o<907?o=807:o<604&&(o=604),i<453&&(i=453),wkcur.mvWidth=o,wkcur.mvHeight=i,wkcur.mvVeryBig=o>1280?2:o>807&&1,WkView.onScroll(!1,!0),WkView.updateHeight(),WkView.updateArrows(),setTimeout(WkView.updateArrows,0)},updateArrows:function(){var _=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.sbWidth)()+2;wkcur.wkLeft&&(wkcur.wkLeft.style.left="20px");var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)(wkcur.wkBox),o=e[0],i=e[1],t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)(wkcur.wkLeftArrowBg)[0],r=t-10,l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)(wkcur.wkLeftArrow)[0]||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)(wkcur.wkRightArrow)[0];wkcur.wkLeftNav.style.width=Math.floor((lastWindowWidth-_-o)/2)+"px",wkcur.wkRightNav.style.left=Math.floor((lastWindowWidth-_+o)/2)+"px",wkcur.wkRightNav.style.width=Math.floor((lastWindowWidth-_-o)/2)+"px",wkcur.wkClose&&(wkcur.wkClose.style.left=lastWindowWidth-_-37+"px"),wkcur.wkRight.style.left=Math.floor((lastWindowWidth-_+o)/2)+"px";var w=WkView.getNextWkRaws(),a="intro"==wkcur.wkRaw;if(w[0]||w[1]||a){var s=_shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.mobile?window.innerHeight:lastWindowHeight,n=(wkcur.wkCont.offsetHeight<s?wkcur.wkCont.offsetTop+10+i/2:s/2)-8;w[0]||a&&wkcur.introControlsCur?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(wkcur.wkLeftArrow),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(wkcur.wkLeftArrowBg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.wkLeftArrowBg,{left:(lastWindowWidth-_-o)/2-t}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.wkLeftArrow,{left:(lastWindowWidth-_-o)/2-r+(r-l)/2,top:n})):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(wkcur.wkLeftArrow,wkcur.wkLeftArrowBg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.wkRight,{paddingBottom:(n-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)(wkcur.wkRight,!0)[1]-24)/2}),w[1]||a&&wkcur.introControls&&wkcur.introControlsCur<wkcur.introControls.length-1?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(wkcur.wkRightArrow),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(wkcur.wkRightArrowBg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.wkRightArrowBg,{left:(lastWindowWidth-_-o)/2+o}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.wkRightArrow,{left:(lastWindowWidth-_-o)/2+o+(r-l)/2,top:n})):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(wkcur.wkRightArrow,wkcur.wkRightArrowBg)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(wkcur.wkLeftArrow,wkcur.wkLeftArrowBg,wkcur.wkRightArrow,wkcur.wkRightArrowBg)},getNextWkRaws:function(){var _=!1,e=!1;if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_33__.isArray)(wkcur.wkRawList)&&wkcur.historyLen<=1&&!wkcur.wkRawLoading){var o=wkcur.wkRawList.length,i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.indexOf)(wkcur.wkRawList,wkcur.wkRaw);i>0&&(_=wkcur.wkRawList[i-1]),i>=0&&i<o-1&&(e=wkcur.wkRawList[i+1]),wkcur.wkRawListLoop&&o>1&&(_=_||wkcur.wkRawList[o-1],e=e||wkcur.wkRawList[0])}return[_,e]},recacheRaw:function(_){return!!(cur.wkviewNavRecache&&_&&cur.wkviewNavRecache[_])&&(delete cur.wkviewNavRecache[_],!0)},openRaw:function(_,e){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(_),(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.showWiki)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)({from:wkcur.from},{w:e}),!1,!1,{fromlist:1,noloader:!0,preload:{cache:wkcur.navNoCache||WkView.recacheRaw(e)?0:1}})},navigate:function(_,e,o){if("intro"===wkcur.wkRaw)return WkView.introNext(o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(e),!1;var i=WkView.getNextWkRaws(),t={};wkcur.from&&(t.from=wkcur.from),o>0&&i[1]&&(wkcur.wkRawLoading=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkcur.wkRightArrow,"wk_arrow_progress"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.showProgress)(wkcur.wkRightArrow),wkcur.onNavigate&&wkcur.onNavigate(i[1],o,_),(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.showWiki)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(t,{w:i[1]}),!1,!1,{fromlist:1,noloader:!0,preload:{cache:wkcur.navNoCache||WkView.recacheRaw(i[1])?0:1}}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(e)),o<0&&i[0]&&(wkcur.wkRawLoading=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkcur.wkLeftArrow,"wk_arrow_progress"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.hideProgress)(wkcur.wkRightArrow),wkcur.onNavigate&&wkcur.onNavigate(i[0],o,_),(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.showWiki)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(t,{w:i[0]}),!1,!1,{fromlist:-1,noloader:!0,preload:{cache:wkcur.navNoCache||WkView.recacheRaw(i[0])?0:1}}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(e))},updateHeight:function(){window.updateWndVScroll&&updateWndVScroll();var _=_shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.mobile?window.innerHeight:lastWindowHeight,e=Math.max(wkcur.wkCont.offsetHeight,_);wkcur.wkLeftNav.style.height=wkcur.wkRightNav.style.height=e+"px";var o=wkcur.wkBox.offsetHeight;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.wkLeftArrowBg.firstChild,{height:o}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.wkRightArrowBg.firstChild,{height:o})},updateSize:function(_){if(wkcur.wkCont){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)(wkcur.wkCont),o=document.documentElement,i=window.innerHeight||o.clientHeight||bodyNode.clientHeight,t=Math.max((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_33__.positive)((i-e[1]-5)/2),14),r=t+10,l=wkLayer.offsetHeight-e[1]+t+90;wkcur.wkCont.style.top=t+"px",wkcur.wkRight.style.top=Math.max(r-wkLayerWrap.scrollTop,16)+"px",wkcur.wkLeftArrowBg.style.paddingTop=wkcur.wkRightArrowBg.style.paddingTop=r+"px",wkcur.wkLeftArrowBg.style.paddingBottom=wkcur.wkRightArrowBg.style.paddingBottom=l+"px",_||(onBodyResize(),WkView.onResize())}},setLocation:function(_,e){for(var o in wkcur.prevLoc={},nav.objLoc)("w"!=o||nav.objLoc[o]!=wkcur.wkRaw&&e)&&(wkcur.prevLoc[o]=nav.objLoc[o]);if(!_){var i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(nav.objLoc,{w:wkcur.wkRaw});delete i.order,delete i.z,nav.strLoc!=nav.toStr(i)&&nav.setLoc(i)}},backLocation:function(){var _=hab.getLoc();if(wkcur.prevLoc&&wkcur.prevLoc!=_)nav.setLoc(wkcur.prevLoc);else{var e=_.split("/");e.length>1&&nav.setLoc(e[0])}layerQueue.noHistory()},showError:function(_){window.wkcur&&(delete wkcur.wkRawLoading,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkcur.wkRightArrow,"wk_arrow_progress"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(wkcur.wkLeftArrow,"wk_arrow_progress"));var e=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_30__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("global_error")},_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("global_close"));return setTimeout(e.hide,2e3),!0},onChange:function(){if(!wkcur.shown)return!1;clearTimeout(wkcur.autosaveTimeout),wkcur.autosaveTimeout=setTimeout((function(){wkcur.note&&wkcur.toStatus&&WkView.saveInfo(!0)}),4e3)},likeOver:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_like_link")),o=e?e[0]:20;(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_31__.showTooltip)(_,{url:"like.php",params:{act:"a_get_stats",object:wkcur.like_obj||wkcur.wkRaw,from:"wkview"},slide:15,shift:[0,8,9],ajaxdt:100,showdt:400,hidedt:200,typeClass:"like_tt",className:"wk_like_tt",dir:"auto",init:function(_){if(_.container){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.geByClass1)("bottom_pointer",_.container,"div"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.geByClass1)("top_pointer",_.container,"div");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(e,{marginLeft:o+2}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(i,{marginLeft:o+2})}}})},like:function(){if(vk.id)if(cur.viewAsBox)cur.viewAsBox();else{var _=!wkcur.liked;ajax.post("like.php",{act:"a_do_"+(_?"":"un")+"like",object:wkcur.like_obj||wkcur.wkRaw,hash:wkcur.likehash,from:"wkview"},{onDone:function(e,o){return WkView.likeUpdate(_,e,o)}}),WkView.likeUpdate(_,wkcur.likes+(_?1:-1))}},likeShare:function(_){var e,o,i=wkcur.like_obj||wkcur.wkRaw,t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("like_share_"+i),r=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.isChecked)(t);if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.checkbox)(t),ajax.post("like.php",{act:"a_do_"+(r?"un":"")+"publish",object:i,hash:_},{onDone:WkView.likeUpdate.pbind(!0)}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_like_link"))e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)("wk_like_count"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_like_icon"),"my_like");else{var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("like_real_count_"+i);e=l?l.value:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)("like_count"+i),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("like_icon"+i),"my_like")}WkView.likeUpdate(!0,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(e)+(o?0:1))},likeShareCustom:function(){vk.id&&(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_30__.showBox)("like.php",{act:"publish_box",object:wkcur.like_obj||wkcur.wkRaw,list:"",from:"wkview"})},likeUpdate:function(_,e,o){e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(e);var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_like_wrap"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domByClass)(i,"_count");if(t){var r=i.tt||{},l=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.clone)(r.opts||{}),w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domByClass)(r.container,"_value"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domByClass)(r.container,"_content"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domByClass)(r.container,"_title");o&&s&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)(s,o),r&&(r.likeInvalidated=!0),w&&(w.value=e),wkcur.likes=e,(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_34__.animateCount)(t,e),wkcur.liked=_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)(i,"my_like",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)(i,"no_likes",!e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)(a,"me_hidden",!_),r.el&&(e?!1===o?r.destroy&&r.destroy():(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(r.container)||o||tooltips.show(r.el,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(l,{showdt:0})):r.hide())}},showLikesPage:function(_,e,o){cur.likesBox.loadTabContent("like.php",{act:"a_get_members",object:_,published:e,offset:o,wall:1},e)},wallBeforeInitPost:function(_){if(window.tooltips&&tooltips.destroyAll(),(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_14__.revertLastInlineVideo)(),wkcur.postInited)return!1;wkcur.pageReplaced=[];for(var e,o,i=wkcur.post;!(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("post"+i))&&cur.onepost&&i===cur.oid+"_"+cur.pid&&(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("fw_post")),e=e||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("reply_fakebox"+i)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("reply_box"+i)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("replies"+i)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("feedback_row_wall"+i)||wkcur.hl_reply&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("post"+wkcur.hl_reply)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("feedback_row_wall_reply"+wkcur.hl_reply));)o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ce)("div",{className:"wk_wall_post_placeholder",id:"wk_wall_post_placeholder_"+e.id}),e.parentNode.replaceChild(o,e),wkcur.pageReplaced.push([e,o]);cur.wallLayer=i,cur.wallLayerLike=wkcur.post_like,_.options.wall_tpl&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(window.lang,_.lang,_.options.wall_tpl.lang),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,{wallCheckComments:_.options.check_comments,wallType:_.options.wall_type,wallTpl:_.options.wall_tpl,wallMyDeleted:{},tsDiff:_.options.wall_tpl&&_.options.wall_tpl.abs_timestamp?900*Math.round(((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_33__.vkNow)()/1e3-_.options.wall_tpl.abs_timestamp)/900):0,wallMyOpened:{},wallMyReplied:{},wallMyRepliesCnt:0,wallUploadOpts:_.options.upload}),Wall.initUpdates(wkcur.options.add_queues,!0),wkcur.timeUpdateInt=setInterval((function(){Wall.updateTimes(wkcur.wkContent)}),1e4)),wkcur._hide.push(WkView.wallDeinitPost),wkcur.postInited=!0},wallAfterInitPost:function(){var _=wkcur.post,e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("reply_field"+_);cur.wkSubscribed&&void 0!==cur.wkSubscribed[(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(_)]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.geByClass1)("_wk_subscribe_btn",wkcur.wkBox),"secondary",cur.wkSubscribed[(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(_)]),delete cur.editing,e&&(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_18__.placeholderInit)(e,{editable:1}),WkView.wallUpdateReplies(),wkcur.hl_reply?setTimeout(Wall.scrollHighlightReply.pbind("post"+wkcur.hl_reply),0):setTimeout((function(){wkLayerWrap.scrollTop=wkcur.toScroll||0,wkcur.toScroll=0}),0)},wallDeinitPost:function(){if(!wkcur.postInited)return!1;cur.wallLayer=!1,cur.wallLayerLike=!1,wkcur.edit&&Wall.cancelEdit(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.each)(wkcur.pageReplaced,(function(){var _=this[0],e=this[1];_&&e&&e.parentNode.replaceChild(_,e)})),clearInterval(wkcur.timeUpdateInt),(0,_web_lib_video__WEBPACK_IMPORTED_MODULE_14__.revertLastInlineVideo)(),window.tooltips&&tooltips.destroyAll(),delete cur.editing,delete wkcur.postInited},wallOnEdit:function(_,e){wkcur.edit=!0,wkcur.editor={changed:!0}},wallOnEdited:function(_){wkcur.edit=!1},wallPostShowDeletedMessage:function(_,e){var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_post");if(o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domData)(o,"post-id")===_){cur.pgPaused=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)("wl_replies_wrap","wl_post_actions_wrap","wl_reply_form_wrap");var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domNS)(o);return i&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)(i,"no_rows")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)(i,e):(i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ce)("div",{id:"post_del"+_,innerHTML:e,className:"no_rows"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domPN)(o).insertBefore(i,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domNS)(o)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(o)),cur.wkviewNavRecache||(cur.wkviewNavRecache={}),cur.wkviewNavRecache[wkcur.wkRaw]=1,wkLayerWrap.scrollTop=0,WkView.updateSize(),!0}return!1},wallPostHideDeletedMessage:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_post");if(e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domData)(e,"post-id")===_){cur.pgPaused=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)("wl_replies_wrap","wl_post_actions_wrap","wl_reply_form_wrap");var o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domNS)(e);return o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)(o,"no_rows")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.re)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(e),cur.wkviewNavRecache||(cur.wkviewNavRecache={}),cur.wkviewNavRecache[wkcur.wkRaw]=1,wkLayerWrap.scrollTop=0,WkView.updateSize(),!0}return!1},wallPostSetArchiveState:function(_,e,o,i,t){if(!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.actionsMenuItemLocked)(_)&&!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.linkLocked)(_)){var r=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)(e.split("_")[1]),l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)(_,"ui_actions_menu_item");ajax.post("al_wall_archive.php",{act:"a_set_state",from:"wkview",hash:o,state:i?1:0,postId:r},{onDone:function(_){t?WkView.wallPostHideDeletedMessage(e):WkView.wallPostShowDeletedMessage(e,_)},showProgress:l?_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.lockActionsMenuItem.pbind(_):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.lockLink)(_),hideProgress:l?_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.unlockActionsMenuItem.pbind(_):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.unlockLink)(_)})}},wallPostDelete:function wallPostDelete(act,hash,force){var post=wkcur.post;if("spam"!==act)cur.wallMyDeleted&&(cur.wallMyDeleted[post]=1),ajax.post("al_wall.php",{act,post,hash,confirm:force?1:0,from:"wkview"},{onDone:function onDone(msg,additional,needConfirm){if(needConfirm)var box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_30__.showFastBox)(msg,needConfirm,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("global_delete"),(function(){box.hide(),WkView.wallPostDelete(act,hash,1)}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("box_cancel"));else{var p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_post");if(p){cur.pgPaused=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)("wl_replies_wrap","wl_post_actions_wrap","wl_reply_form_wrap");var del=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domNS)(p);if(del&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)(del,"no_rows")?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)(del,msg):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domPN)(p).insertBefore((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ce)("div",{id:"post_del"+post,innerHTML:msg,className:"no_rows"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domNS)(p)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(p)),wkLayerWrap.scrollTop=0,"spam"===act)try{eval(additional)}catch(_){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.logEvalError)(_,additional)}WkView.updateSize()}}},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.lockButton.pbind("wpe_delete"+post),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.unlockButton.pbind("wpe_delete"+post)});else{var _post$split=post.split("_"),_post$split2=_slicedToArray(_post$split,2),photoOwnerId=_post$split2[0],photoId=_post$split2[1],onSubmit=()=>{var _=document.querySelector(".wl_post .wkview_mark_as_spam");null!==_?(_.onclick=null,_.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("global_report_sent")):(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_27__.debugLog)("Unable to find report button")};(0,_web_reports_reports__WEBPACK_IMPORTED_MODULE_35__.showReportForm)("wall",photoOwnerId,photoId,onSubmit)}},wallPostRestore:function(_){var e=wkcur.post;return cur.wallMyDeleted&&(cur.wallMyDeleted[e]=0),ajax.post("al_wall.php",{act:"restore",post:e,hash:_,from:"wkview"},{onDone:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_post");if(_&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(_)){cur.pgPaused=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)("wl_replies_wrap","wl_post_actions_wrap","wl_reply_form_wrap");var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domNS)(_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(_),e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)(e,"no_rows")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.re)(e),WkView.updateSize()}}}),!1},wallUpdateRepliesOnScroll:function(_){if(wkcur.postInited){var e=window.innerHeight||document.documentElement.clientHeight,o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_replies_more");if(!o){var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("replies"+cur.wallLayer),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domLC)(i);t&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)(t,"replies_next")&&(0,_web_wall_reply_update_view__WEBPACK_IMPORTED_MODULE_36__.loadRepliesLinkIsVisible)(t)&&(o=t)}if(o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(o))e+500>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)(o,!0)[1]&&o.onclick();var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_reply_form");if(r&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)(r,"wl_post_reply_form_forbidden")){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_reply_form_wrap"),w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)(l,!0)[1],a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)(r),s=a[1];if(_&&!1===wkcur.fixedBottom&&e-s<w+20)wkLayerWrap.scrollTop+=w+20-(e-s);else if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(l)&&e-s<w){wkcur.fixedBottom&&!_||(wkcur.fixedBottom=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(r,"wl_reply_form_fixed"));var n=wkcur.fixedBottom?Math.min(0,Math.max(-wkLayerWrap.scrollLeft,bodyNode.clientWidth-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("page_layout"))[0])):null,E=Math.min(0,e-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)("wl_replies_wrap",!0)[1]-s);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)("wl_reply_form_wrap",{width:a[0],height:a[1],bottom:E,marginLeft:n}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(r,{bottom:E})}else(wkcur.fixedBottom||_)&&(wkcur.fixedBottom=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)(r,"wl_reply_form_fixed"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)("wl_reply_form_wrap",{width:null,height:null,marginLeft:null}))}}},wallShowMoreReplies:function(){if(wkcur.loadingReplies)return!1;var _=wkcur.offset+wkcur.loaded,e=wkcur.limit,o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("replies"+wkcur.post);return wkcur.count<=_||!o||(wkcur.loadingReplies=!0,Wall.moreReplies(wkcur.post,(wkcur.reverse?-1:1)*_,e,{from:"wkview",append:!0,rev:wkcur.reverse?1:0,onDone:function(_,e,o){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,{count:o.count,loaded:wkcur.loaded+o.num}),WkView.wallUpdateReplies(),wkcur.loadingReplies=!1},onFail:function(){wkcur.loadingReplies=!1},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.lockButton.pbind("wl_replies_more"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.unlockButton.pbind("wl_replies_more")})),!1},wallShowPreviousReplies:function(_){if(wkcur.loadingReplies||wkcur.reverse)return!1;var e=Math.max(0,wkcur.offset-100),o=Math.min(100,wkcur.offset-e),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("replies"+wkcur.post);if(o<=0||!i)return!1;wkcur.loadingReplies=!0;var t=i.offsetHeight;Wall.moreReplies(wkcur.post,e,o,{from:"wkview",onDone:function(e,o,r){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,{count:r.count,offset:r.offset,loaded:wkcur.loaded+r.num}),_&&(wkLayerWrap.scrollTop+=i.offsetHeight-t,setTimeout(Wall.scrollHighlightReply.pbind("post"+_),0)),WkView.wallUpdateReplies(),wkcur.loadingReplies=!1},onFail:function(){wkcur.loadingReplies=!1},showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass.pbind("wl_replies_header_wrap","wl_replies_header_loading"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass.pbind("wl_replies_header_wrap","wl_replies_header_loading")}),StickersAnimation&&StickersAnimation.reloadStickers()},wallUpdateReplies:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggle)("wl_replies_more",wkcur.offset+wkcur.loaded<wkcur.count);var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_replies_header"),e=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.langNumeric)(wkcur.count,wkcur.lang.wall_N_replies),o=!1;!wkcur.reverse&&wkcur.offset>0&&(e=wkcur.offset>100?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.langNumeric)(100,wkcur.lang.wall_show_n_of_m_last).replace("{count}",wkcur.count):(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.langNumeric)(wkcur.count,wkcur.lang.wall_show_all_n_replies),o=!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)("wl_replies_header_label",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)(_,"wl_replies_header_clickable",o);var i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_replies_wrap"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_reply_form");if(i&&(wkcur.count&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(i.firstChild)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(i.firstChild),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)(i,"wl_replies_empty",!wkcur.count)),t){var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_reply_form_wrap");t.parentNode!=r&&r.appendChild(t)}WkView.wallUpdateRepliesOnScroll(),WkView.updateSize()},wallCancelEditReply:function(){var _=wkcur.post,e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("reply_field"+_),o=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.data)(e,"composer");o?Composer.reset(o):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)(e,""),Wall.hideEditReply(_),WkView.wallUpdateReplies()},wallInverseReplies:function(_){if(wkcur.loadingReplies)return!1;wkcur.loadingReplies=!0,wkcur.reverse=!wkcur.reverse,wkcur.offset=0,Wall.moreReplies(wkcur.post,wkcur.offset,wkcur.limit,{from:"wkview",clear:!0,rev:wkcur.reverse?1:0,onDone:function(e,o,i){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domFC)(_).className=wkcur.reverse?"sort_rev_icon":"sort_not_rev_icon",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,{count:i.count,loaded:i.num}),WkView.wallUpdateReplies(),wkcur.loadingReplies=!1},onFail:function(){wkcur.reverse=!wkcur.reverse,wkcur.loadingReplies=!1},showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass.pbind("wl_replies_header_wrap","wl_replies_header_loading"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass.pbind("wl_replies_header_wrap","wl_replies_header_loading")})},likesInit:function(){((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,{historyLen:wkcur.historyLen||0}),WkView.initSTL(),WkView.likesTabInit(),likesTabsInvalidate(wkcur.like_obj),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(window,"resize",WkView.onResize),onBodyResize(),cur.wallTpl=cur.wallTpl||{},cur.wallInited)?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_post"),"deep_active")&&wkcur.wall_opts.wall_tpl.reply_form_new?(wkcur._oldReplyFormNew=cur.wallTpl.reply_form_new,cur.wallTpl.reply_form_new=wkcur.wall_opts.wall_tpl.reply_form_new):(wkcur._oldReplyForm=cur.wallTpl.reply_form,cur.wallTpl.reply_form=wkcur.wall_opts.wall_tpl.reply_form):Wall.initWallOptions(wkcur.wall_opts);void 0===cur.options?cur.options={reply_names:{}}:void 0===cur.options.reply_names&&(cur.options.reply_names={}),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(cur.options.reply_names,wkcur.reply_names),wkcur._hide.push((function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.removeEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.removeEvent)(window,"resize",WkView.onResize),wkcur._oldReplyForm&&(cur.wallTpl.reply_form=wkcur._oldReplyForm,wkcur._oldReplyForm=!1),wkcur._oldReplyFormNew&&(cur.wallTpl.reply_form_new=wkcur._oldReplyFormNew,wkcur._oldReplyFormNew=!1)}))},likesTabInit:function(){wkcur.preload&&ajax.preload("wkview.php",{act:"show",w:wkcur.wkRaw,offset:wkcur.offset},wkcur.preload)},likesToTop:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("tb_tabs_wrap"),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)(_,!0)[1];wkcur.lSTL&&wkcur.lSTL.el==(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_box")&&(wkcur.lSTLWas=0),e<0&&(wkLayerWrap.scrollTop+=e+1),WkView.likesOnScroll(),wkcur.lSTL&&WkView.stlOnScroll()},likesTab:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("likes_tab_"+_),o=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domFC)(e),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.gpeByClass)("ui_tabs",o);if(!o||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.geByClass1)("ui_tab_sel",i)==o)return!1;uiTabs.switchTab(o);var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.gpeByClass)("wk_wiki_content",i);ajax.post("wkview.php",{act:"show",w:_+"/"+wkcur.like_obj,part:1},{cache:1,showProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass.pbind(t,"box_loading"),hideProgress:_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass.pbind(t,"box_loading"),onDone:function(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)("wk_likes_content",_),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,e),WkView.likesTabInit(),WkView.setLocation(),WkView.updateHeight(),WkView.likesToTop()}})},likesPreload:function(){ajax.post("wkview.php",{act:"show",w:wkcur.wkRaw,offset:wkcur.offset},{cache:1})},likesMore:function(){var _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_likes_more_link");(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.isButtonLocked)(_)||ajax.post("wkview.php",{act:"show",w:wkcur.wkRaw,offset:wkcur.offset},{onDone:function(e,o,i,t,r){var l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_likes_rows");if(l){if(r)for(var w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.geByClass)("wk_likes_hidden",l),a=0,s=w.length;a<s;++a)l.appendChild(w[a]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)(w[a],"wk_likes_hidden");l.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.cf)(e)),wkcur.offset=o,i?WkView.likesPreload():(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(_),WkView.updateHeight(),t&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(cur.options.reply_names,t)}},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.lockButton.pbind(_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.unlockButton.pbind(_),cache:1})},likesOnScroll:function(_){var e=lastWindowHeight,o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_likes_more_link"),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("tb_tabs"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("tb_tabs_wrap");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)(t,!0)[1]<0?wkcur.tbFixed||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(t,"height",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domFC)(i).offsetHeight),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domFC)(i),"width",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getStyle)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domFC)(i),"width"))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)(i,"ui_tabs_fixed"),wkcur.tbFixed=!0):wkcur.tbFixed&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)(i,"ui_tabs_fixed"),wkcur.tbFixed=!1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(o)&&e>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)(o,!0)[1]&&o.click()},likesBlacklistTip:function(_){(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_31__.showTooltip)(_,{text:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("like_block_liker"),shift:[8,5,5],black:1})},likesBlacklist:function(_,e,o){return _.tt&&_.tt.destroy&&_.tt.destroy(),(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_30__.showBox)("like.php",{act:"spam",mid:e,object:wkcur.like_obj}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(o)},likesRecache:function(_){for(var e in wkcur.offset+=_,ajaxCache)e.match(new RegExp("^\\/wkview.php\\#act=show",""))&&delete ajaxCache[e]},likesRemove:function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.re)("fans_fan_row"+_),WkView.likesRecache(-1),WkView.onScroll(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_likes_rows"))||nav.reload()},historyInit:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.addEvent)(window,"resize",WkView.onResize),onBodyResize(),wkcur._hide.push((function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.removeEvent)(wkLayerWrap,"scroll",WkView.onScroll),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.removeEvent)(window,"resize",WkView.onResize)}))},historyOnScroll:function(){if(wkcur.loadingHistory)return!1;var _=window.innerHeight||document.documentElement.clientHeight,e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_history_more_link");e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(e)&&(_+500>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getXY)(e,!0)[1]&&e.onclick())},historyShowMore:function(){if(wkcur.loadingHistory)return!1;var _=wkcur.offset;return wkcur.loadingHistory=!0,ajax.post("wkview.php",{act:"show",w:wkcur.wkRaw,offset:_,part:1},{onDone:function(_,e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_history_rows")){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_history_rows").appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.cf)(e)),setTimeout(WkView.historyOnScroll,500);var o=wkcur.offset<wkcur.count&&e;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggle)("wk_history_more_link",o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggle)("wk_history_empty",!o&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_history_rows"))),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)("wk_history_more","wk_history_more_loading",o&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_history_rows"))),wkcur.loadingHistory=!1}},onFail:function(){wkcur.loadingHistory=!1},showProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)("wk_history_more_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)("wk_history_more_progress")},hideProgress:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)("wk_history_more_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)("wk_history_more_progress")}}),!1},preloadArrow:function(_){var e=wkcur[_?"wkRightArrow":"wkLeftArrow"];if(!e.cached){e.cached=!0;var o=WkView.getNextWkRaws()[_?1:0];if(o){var i={w:o};if(o&&"/query"===o.substr(-6)){var t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.clone)(nav.objLoc);delete t[0],delete t.w,i.query=JSON.stringify(t)}wkcur.from&&(i.from=wkcur.from),ajax.post("wkview.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)({act:"show",loc:nav.objLoc[0],is_preload:!0},i),{cache:1})}}},back:function(){if(wkcur.historyLen>1)return wkcur.doBack=1,wkcur.historyLen-=1,history.go(-1),!0;WkView.hide()},initSTL:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.re)(cur.lSTL),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_23__.extend)(wkcur,{lSTL:wkLayerWrap.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ce)("div",{id:"layer_stl",innerHTML:'<div id="layer_stl_bg" class="fixed"></div><div id="layer_stl_cl"></div><nobr id="layer_stl_text" class="fixed">'+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("global_to_top")+"</nobr>",el:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wk_box"),onclick:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent,onmousedown:WkView.stlDown,sc:WkView.stlOnScroll})),lSTLText:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("layer_stl_text",wkLayerWrap),lSTLShown:0,lSTLWas:0,lSTLWasSet:0}),cur.lSTL=wkcur.lSTL,wkcur._hide.push((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.re)(wkcur.lSTL,cur.lSTL)}))},stlDown:function(_){if(_=_||window.event,!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.checkEvent)(_)){if(!__afterFocus)if(wkcur.lSTLWasSet&&wkcur.lSTLWas){var e=wkcur.lSTLWas;wkcur.lSTLWas=0,wkLayerWrap.scrollTop=e}else wkcur.lSTLWas=wkLayerWrap.scrollTop,wkLayerWrap.scrollTop=0;return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_24__.cancelEvent)(_)}},stlOnScroll:function(_){var e=wkLayerWrap.scrollTop,o=200,i=wkcur.lSTLWas||e>o,t=0;if(wkcur.lSTL.style.marginTop=e+"px",vk.staticheader){var r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.getSize)("page_header_wrap")[1];wkcur.lSTLText.style.marginTop=Math.max(-Math.min((0,_web_lib_scroll__WEBPACK_IMPORTED_MODULE_21__.scrollGetY)(),bodyNode.clientHeight-(window.lastWindowHeight||0)),-r)+"px"}if(i?(1!==wkcur.lSTLShown&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(wkcur.lSTL),wkcur.lSTLShown=1),wkcur.lSTLWas&&e>500&&(wkcur.lSTLWas=0),e>o?(t=(e-o)/o,wkcur.lSTLWasSet&&(wkcur.lSTLWasSet=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domLC)(wkcur.lSTL),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("global_to_top")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domLC)(wkcur.lSTL),"down"))):(t=(o-e)/o,wkcur.lSTLWas&&(wkcur.lSTLWasSet||(wkcur.lSTLWasSet=1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domLC)(wkcur.lSTL),""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domLC)(wkcur.lSTL),"down"))))):0!==wkcur.lSTLShown&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(wkcur.lSTL),wkcur.lSTLShown=0),wkcur.wkLeft&&wkcur.wkLeftNav){var l=wkcur.historyLen>1&&!i;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggle)(wkcur.wkLeft,l),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggle)(wkcur.wkLeftNav,l),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.wkLeftWrap,{opacity:1-Math.min(Math.max(e/o,0),1)}),l||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.wkLeft,{opacity:.4})}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.setStyle)(wkcur.lSTL,{opacity:Math.min(Math.max(t,0),1)})},subscribe:function(_,e){var o=_.tt&&(_.tt.shown||_.tt.showing);o?tooltips.hide(_,{fasthide:1}):_.tt&&_.ttimer&&(clearTimeout(_.ttimer),o=!0),ajax.post("/al_wall.php",{act:"toggle_subscribe",post:wkcur.post,hash:e},{onDone:function(e){WkView.setSubscribed(_,e.subscribed,o)},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.lockButton)(_),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_29__.unlockButton)(_)})},setSubscribed:function(_,e,o){_.innerHTML=wkcur.lang[e?"wall_unsubscribe_post":"wall_subscribe_post"],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)(_,"wl_post_subscribed",e),o&&WkView.showSubscribeTooltip(_),cur.onWKSubscribe&&(cur.onWKSubscribe(e),delete cur.onWKSubscribe)},showSubscribeTooltip:function(_){var e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)(_,"wl_post_subscribed");(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_31__.showTooltip)(_,{dir:"left",asrtl:1,text:function(){return wkcur.lang[e?"wall_unsubscribe_post_tt":"wall_subscribe_post_tt"]},shift:[260,-15],slideX:-10,showdt:200,className:"subscr_post_tt"})},shareApp:function(_,e){if(vk.id){var o={act:"publish_box",object:wkcur.like_obj,url_hash:e,list:"",from:"wkview"},i={onDone:function(){var o=_;e&&(o+="#"+e);var i=cur.sbField&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.data)(cur.sbField,"composer");i&&i.addMedia&&i.addMedia.checkURL(o)}};(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_30__.showBox)("like.php",o,i)}},closeComments:function(_,e,o,i){Wall.closeComments(_,e,o,i,(function(_){WkView.onCloseComments(_,e,o),wkcur.pageReplaced&&wkcur.pageReplaced.length&&wkcur.pageReplaced.forEach((function(i){var t=i[0];t.id==="post"+e+"_"+o&&Wall.onCloseComments(_,t)}))}))},onCloseComments:function(_,e,o,i){var t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_post"),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hasClass)(t,"Post--with_closed_comments_donut"),l=_?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.geByClass1)("wl_post_reply_form_forbidden"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_reply_form");if(i||l||r){var w=_?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_reply_form"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.geByClass1)("wl_post_reply_form_forbidden");r||(wkcur.isArchived?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)(t,"closed_comments",!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(l),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(w)):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.toggleClass)(t,"closed_comments",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.show)(l),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.hide)(w)));var a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.geByClass1)("action_closing_comments",t);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.domData)(a,"closed",_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.val)(a,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)(_?"wall_open_comments":"wall_closing_comments"))}else ajax.post("wkview.php",{act:"comment_box",owner_id:e,post_id:o},{onDone:function(i){i&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.ge)("wl_reply_form_wrap").appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.se)(i)),!_&&!wkcur.isArchived&&WkView.wallAfterInitPost(),WkView.onCloseComments(_,e,o,!0))}})},initPostsReachTooltip,_eof:1};function initPostsReachTooltip(){var _=document.querySelector("#wk_posts_reach_tooltip_link");_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_28__.isVisible)(_)&&(cur.postsReachTabTooltipEl=new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_37__.ElementTooltip(_,{content:`\n        <div class='wk_reach_tooltip'>\n          <div class='wk_reach_tooltip_text'>\n            <div class='wk_reach_tooltip_text_header'>${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("stats_posts_reach_tooltip_head")}</div>\n            ${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_16__.getLang)("stats_posts_reach_tooltip_body")}\n          </div>\n        </div>\n      `,cls:"wk_reach_tooltip_wrapper",forceSide:"right",align:"left",appendToParent:!0,offset:[5,0]}))}function likesTabsInvalidate(_){var e;if(_){var o=_web_lib_ajax_cache__WEBPACK_IMPORTED_MODULE_26__.AjaxCacheClient.makeCacheKey("/wkview.php");null===(e=_web_lib_ajax_cache__WEBPACK_IMPORTED_MODULE_26__.AjaxCacheClient.invalidateFor)||void 0===e||e.call(_web_lib_ajax_cache__WEBPACK_IMPORTED_MODULE_26__.AjaxCacheClient,(e=>{var i;return!(!e.startsWith(o)||!e.includes(_))&&!!(null===(i=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_12__.fromQueryString)(e.substring(e.indexOf("#")+1)).w)||void 0===i?void 0:i.match(/(likes|shares|friendlikes|reactions_\d)/))}))}}}}]);try{stManager.done("dist/c11737817dc53ef4526f1c7e34a5b883.722a645f004cb0d7f119.js")}catch(_){}